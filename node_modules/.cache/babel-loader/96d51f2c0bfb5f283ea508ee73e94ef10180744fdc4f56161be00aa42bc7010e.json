{"ast":null,"code":"var _jsxFileName = \"/Users/j/Desktop/chatapp3/src/component/Chat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { collection, query, orderBy, limit, onSnapshot } from 'firebase/firestore';\nimport { firestore } from '../firebase';\nimport SignOut from './SignOut';\nimport SendMessage from './SendMessage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Chat() {\n  _s();\n  const scroll = useRef;\n  const [messages, setMessages] = useState([]);\n  useEffect(() => {\n    const messagesRef = collection(firestore, 'messages');\n    const q = query(messagesRef, orderBy('createdAt'), limit(25));\n    const unsubscribe = onSnapshot(q, querySnapshot => {\n      const data = [];\n      querySnapshot.forEach(doc => {\n        data.push({\n          id: doc.id,\n          ...doc.data()\n        });\n      });\n      setMessages(data);\n    });\n    return () => unsubscribe();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(SignOut, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 13\n    }, this), messages.map(({\n      id,\n      text\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 21\n      }, this)\n    }, id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 17\n    }, this)), /*#__PURE__*/_jsxDEV(SendMessage, {\n      scroll: scroll\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: scroll\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 9\n  }, this);\n}\n_s(Chat, \"RyA59LRbn9goj/9N7rELX+NWNVI=\");\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","collection","query","orderBy","limit","onSnapshot","firestore","SignOut","SendMessage","jsxDEV","_jsxDEV","Chat","_s","scroll","messages","setMessages","messagesRef","q","unsubscribe","querySnapshot","data","forEach","doc","push","id","children","fileName","_jsxFileName","lineNumber","columnNumber","map","text","ref","_c","$RefreshReg$"],"sources":["/Users/j/Desktop/chatapp3/src/component/Chat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { collection, query, orderBy, limit, onSnapshot } from 'firebase/firestore';\nimport { firestore } from '../firebase';\nimport SignOut from './SignOut';\nimport SendMessage from './SendMessage';\n\nfunction Chat() {\n    const scroll = useRef\n    const [messages, setMessages] = useState([]);\n\n    useEffect(() => {\n        const messagesRef = collection(firestore, 'messages');\n        const q = query(messagesRef, orderBy('createdAt'), limit(25));\n\n        const unsubscribe = onSnapshot(q, (querySnapshot) => {\n            const data = [];\n            querySnapshot.forEach((doc) => {\n                data.push({ id: doc.id, ...doc.data() });\n            });\n            setMessages(data);\n        });\n\n        return () => unsubscribe();\n    }, []);\n\n    return (\n        <div>\n            <SignOut />\n            {messages.map(({ id, text }) => (\n                <div key={id}>\n                    <p>{text}</p>\n                </div>\n            ))}\n            <SendMessage scroll={scroll}/>\n            <div ref={scroll}></div>\n        </div>\n    );\n}\n\nexport default Chat;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,UAAU,EAAEC,KAAK,EAAEC,OAAO,EAAEC,KAAK,EAAEC,UAAU,QAAQ,oBAAoB;AAClF,SAASC,SAAS,QAAQ,aAAa;AACvC,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,WAAW,MAAM,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,SAASC,IAAIA,CAAA,EAAG;EAAAC,EAAA;EACZ,MAAMC,MAAM,GAAGb,MAAM;EACrB,MAAM,CAACc,QAAQ,EAAEC,WAAW,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EAE5CC,SAAS,CAAC,MAAM;IACZ,MAAMiB,WAAW,GAAGf,UAAU,CAACK,SAAS,EAAE,UAAU,CAAC;IACrD,MAAMW,CAAC,GAAGf,KAAK,CAACc,WAAW,EAAEb,OAAO,CAAC,WAAW,CAAC,EAAEC,KAAK,CAAC,EAAE,CAAC,CAAC;IAE7D,MAAMc,WAAW,GAAGb,UAAU,CAACY,CAAC,EAAGE,aAAa,IAAK;MACjD,MAAMC,IAAI,GAAG,EAAE;MACfD,aAAa,CAACE,OAAO,CAAEC,GAAG,IAAK;QAC3BF,IAAI,CAACG,IAAI,CAAC;UAAEC,EAAE,EAAEF,GAAG,CAACE,EAAE;UAAE,GAAGF,GAAG,CAACF,IAAI,CAAC;QAAE,CAAC,CAAC;MAC5C,CAAC,CAAC;MACFL,WAAW,CAACK,IAAI,CAAC;IACrB,CAAC,CAAC;IAEF,OAAO,MAAMF,WAAW,CAAC,CAAC;EAC9B,CAAC,EAAE,EAAE,CAAC;EAEN,oBACIR,OAAA;IAAAe,QAAA,gBACIf,OAAA,CAACH,OAAO;MAAAmB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EACVf,QAAQ,CAACgB,GAAG,CAAC,CAAC;MAAEN,EAAE;MAAEO;IAAK,CAAC,kBACvBrB,OAAA;MAAAe,QAAA,eACIf,OAAA;QAAAe,QAAA,EAAIM;MAAI;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI;IAAC,GADPL,EAAE;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAEP,CACR,CAAC,eACFnB,OAAA,CAACF,WAAW;MAACK,MAAM,EAAEA;IAAO;MAAAa,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC,eAC9BnB,OAAA;MAAKsB,GAAG,EAAEnB;IAAO;MAAAa,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACvB,CAAC;AAEd;AAACjB,EAAA,CA/BQD,IAAI;AAAAsB,EAAA,GAAJtB,IAAI;AAiCb,eAAeA,IAAI;AAAC,IAAAsB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}